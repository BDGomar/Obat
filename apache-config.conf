<VirtualHost *:8080>
    ServerName 13.50.248.190
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/obat-backend/public

    <Directory /var/www/obat-backend/public>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
    
    # PHP-FPM Configuration
    <FilesMatch \.php$>
        SetHandler "proxy:unix:/var/run/php/php8.2-fpm.sock|fcgi://localhost"
    </FilesMatch>
    
    # Alternative si PHP-FPM n'est pas configuré, utiliser mod_php
    # <FilesMatch \.php$>
    #     SetHandler application/x-httpd-php
    # </FilesMatch>

    # Logs
    ErrorLog ${APACHE_LOG_DIR}/obat-backend-error.log
    CustomLog ${APACHE_LOG_DIR}/obat-backend-access.log combined

    # Sécurité supplémentaire
    <Directory /var/www/obat-backend>
        Options -Indexes
        AllowOverride None
        Require all denied
    </Directory>

    # Autoriser uniquement le dossier public
    <Directory /var/www/obat-backend/public>
        Require all granted
    </Directory>
</VirtualHost>

